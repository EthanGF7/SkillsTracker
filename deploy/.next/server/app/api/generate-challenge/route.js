"use strict";(()=>{var e={};e.id=821,e.ids=[821],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},2100:(e,a,o)=>{o.r(a),o.d(a,{originalPathname:()=>j,patchFetch:()=>q,requestAsyncStorage:()=>b,routeModule:()=>f,serverHooks:()=>E,staticGenerationAsyncStorage:()=>x});var r={};o.r(r),o.d(r,{POST:()=>v});var n=o(3278),t=o(5002),s=o(4877),i=o(1309),l=o(4770);let c={randomUUID:l.randomUUID},d=new Uint8Array(256),u=d.length,p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));let m=function(e,a,o){if(c.randomUUID&&!a&&!e)return c.randomUUID();let r=(e=e||{}).random??e.rng?.()??(u>d.length-16&&((0,l.randomFillSync)(d),u=0),d.slice(u,u+=16));if(r.length<16)throw Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,a){if((o=o||0)<0||o+16>a.length)throw RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[o+e]=r[e];return a}return function(e,a=0){return(p[e[a+0]]+p[e[a+1]]+p[e[a+2]]+p[e[a+3]]+"-"+p[e[a+4]]+p[e[a+5]]+"-"+p[e[a+6]]+p[e[a+7]]+"-"+p[e[a+8]]+p[e[a+9]]+"-"+p[e[a+10]]+p[e[a+11]]+p[e[a+12]]+p[e[a+13]]+p[e[a+14]]+p[e[a+15]]).toLowerCase()}(r)};var g=o(9836),y=o(9310);let h={Empatía:{context:"Eres un experto en desarrollo de habilidades emocionales y sociales. Tu objetivo es crear retos que ayuden a desarrollar la empat\xeda en situaciones cotidianas y profesionales.",examples:{daily:["Practica la escucha activa con tres personas diferentes hoy","Observa y anota las emociones de las personas con las que interact\xfaas","Intenta ver una situaci\xf3n desde el punto de vista de otra persona"],weekly:["Mant\xe9n un diario de empat\xeda durante una semana, documentando las emociones de otros","Organiza una actividad grupal donde cada persona comparta una experiencia personal","Realiza un proyecto que beneficie a un grupo diferente al tuyo"]}},Creatividad:{context:"Eres un experto en desarrollo del pensamiento creativo. Tu objetivo es crear retos que estimulen la innovaci\xf3n y el pensamiento lateral.",examples:{daily:["Encuentra cinco usos no convencionales para un objeto com\xfan","Dibuja o escribe algo usando tu mano no dominante","Resuelve un problema cotidiano de una manera totalmente nueva"],weekly:["Crea un proyecto art\xedstico usando solo materiales reciclados","Desarrolla una historia usando perspectivas de diferentes personajes","Dise\xf1a una soluci\xf3n innovadora para un problema de tu comunidad"]}},Comunicación:{context:"Eres un experto en habilidades de comunicaci\xf3n. Tu objetivo es crear retos que mejoren la capacidad de expresar ideas y escuchar efectivamente.",examples:{daily:["Explica un concepto complejo usando solo analog\xedas simples","Practica comunicaci\xf3n no verbal consciente durante una conversaci\xf3n","Da y recibe feedback constructivo en una situaci\xf3n espec\xedfica"],weekly:["Prepara y da una presentaci\xf3n sobre un tema que te apasione","Organiza un debate grupal sobre un tema controvertido","Crea un podcast o video explicativo sobre un tema complejo"]}},"Trabajo en equipo":{context:"Eres un experto en din\xe1micas de grupo y colaboraci\xf3n. Tu objetivo es crear retos que mejoren la capacidad de trabajar efectivamente con otros.",examples:{daily:["Ofrece ayuda proactivamente a tres compa\xf1eros diferentes","Participa activamente en una reuni\xf3n de equipo","Resuelve un conflicto menor usando la comunicaci\xf3n efectiva"],weekly:["Organiza un proyecto colaborativo con roles bien definidos","Implementa un sistema de feedback grupal constructivo","Coordina una actividad que requiera la participaci\xf3n de varios equipos"]}},Liderazgo:{context:"Eres un experto en desarrollo de liderazgo. Tu objetivo es crear retos que desarrollen habilidades de liderazgo efectivo y motivaci\xf3n de equipos.",examples:{daily:["Toma la iniciativa en una situaci\xf3n que requiera direcci\xf3n","Practica la delegaci\xf3n efectiva de una tarea","Motiva a un compa\xf1ero que enfrenta un desaf\xedo"],weekly:["Desarrolla un plan de mejora para tu equipo o grupo","Implementa un sistema de reconocimiento y motivaci\xf3n","Lidera un proyecto desde su concepci\xf3n hasta su finalizaci\xf3n"]}},Organización:{context:"Eres un experto en gesti\xf3n del tiempo y organizaci\xf3n. Tu objetivo es crear retos que mejoren la capacidad de planificar y estructurar actividades.",examples:{daily:["Implementa la t\xe9cnica Pomodoro durante un d\xeda completo","Reorganiza tu espacio de trabajo para m\xe1xima eficiencia","Prioriza y completa las tres tareas m\xe1s importantes del d\xeda"],weekly:["Crea y sigue un sistema de organizaci\xf3n personal completo","Implementa un m\xe9todo de gesti\xf3n de proyectos para tus actividades","Desarrolla un plan de productividad semanal detallado"]}},Adaptabilidad:{context:"Eres un experto en gesti\xf3n del cambio y resiliencia. Tu objetivo es crear retos que mejoren la capacidad de adaptaci\xf3n a nuevas situaciones.",examples:{daily:["Cambia una rutina establecida por una nueva","Enfrenta una situaci\xf3n fuera de tu zona de confort","Practica respuestas positivas ante cambios inesperados"],weekly:["Aprende una nueva habilidad completamente diferente","Implementa cambios significativos en tu rutina semanal","Desarrolla estrategias para manejar situaciones imprevistas"]}},"Resoluci\xf3n de problemas":{context:"Eres un experto en pensamiento cr\xedtico y resoluci\xf3n de problemas. Tu objetivo es crear retos que mejoren la capacidad de analizar y resolver situaciones complejas.",examples:{daily:["Resuelve un problema usando el m\xe9todo de los cinco porqu\xe9s","Aplica el pensamiento lateral a un desaf\xedo cotidiano","Analiza un problema desde tres perspectivas diferentes"],weekly:["Desarrolla un proyecto usando metodolog\xeda de design thinking","Crea un sistema para resolver problemas recurrentes","Implementa soluciones innovadoras para desaf\xedos complejos"]}},"Gesti\xf3n del tiempo":{context:"Eres un experto en productividad y administraci\xf3n del tiempo. Tu objetivo es crear retos que mejoren la eficiencia y planificaci\xf3n personal.",examples:{daily:["Aplica la matriz de Eisenhower a tus tareas diarias","Elimina tres actividades que desperdicien tiempo","Implementa bloques de tiempo enfocado"],weekly:["Crea un sistema de seguimiento del tiempo detallado","Desarrolla un plan de productividad personalizado","Optimiza tu rutina semanal para m\xe1xima eficiencia"]}}};async function v(e){try{let a;let{skill:o,level:r,type:n}=await e.json();if(!o||!r||!n)return i.NextResponse.json({error:"Faltan par\xe1metros requeridos"},{status:400});console.log("Generando reto:",{skill:o,level:r,type:n});let t=h[o];if(!t)return i.NextResponse.json({error:"Habilidad no v\xe1lida"},{status:400});let s={role:"system",content:`${t.context}

IMPORTANTE: 
1. Genera un reto ${"daily"===n?"DIARIO":"SEMANAL"} espec\xedfico para la habilidad "${o}".
2. Los retos diarios deben ser concisos y realizables en un d\xeda.
3. Los retos semanales deben ser m\xe1s elaborados y tener mayor impacto.
4. NO repitas ejemplos similares a retos anteriores.
5. Adapta la complejidad al nivel "${r}".

Ejemplos de buenos retos ${"daily"===n?"DIARIOS":"SEMANALES"} para ${o}:
${t.examples[n].map(e=>`- ${e}`).join("\n")}

Responde SOLO con un objeto JSON con esta estructura exacta:
{
  "title": "t\xedtulo breve y espec\xedfico",
  "description": "descripci\xf3n detallada que explique el prop\xf3sito y beneficios",
  "rules": ["regla1", "regla2", "regla3"],
  "extraTip": "consejo adicional para mejorar la experiencia"
}`},l={role:"user",content:`Genera un reto ${"daily"===n?"DIARIO":"SEMANAL"} de nivel "${r}" que se centre espec\xedficamente en desarrollar la habilidad de ${o}. ${"daily"===n?"El reto debe ser conciso y realizable en un d\xeda.":"El reto debe ser m\xe1s elaborado y tener un impacto significativo durante la semana."}`};console.log("Conectando a:",g.gd);let c=await fetch(g.gd,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.Hw}`},body:JSON.stringify({messages:[s,l],model:"deepseek-chat",temperature:.7,max_tokens:1e3,stream:!1})});if(!c.ok){console.error("Error de la API:",c.status,c.statusText);let e=await c.text();return console.error("Respuesta de error completa:",e),i.NextResponse.json({error:"Error de la API",details:{status:c.status,statusText:c.statusText,error:e,requestBody:JSON.stringify({messages:[s,l],model:"deepseek-chat",temperature:.7,max_tokens:1e3,stream:!1})}},{status:c.status,headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}console.log("Response headers:",Object.fromEntries(c.headers.entries()));let d=await c.json();if(console.log("Respuesta completa de la API:",JSON.stringify(d,null,2)),console.log("Choices:",d.choices),console.log("Primer choice:",d.choices?.[0]),console.log("Mensaje:",d.choices?.[0]?.message),console.log("Contenido:",d.choices?.[0]?.message?.content),!d.choices?.[0]?.message?.content)return i.NextResponse.json({error:"Respuesta inv\xe1lida de la API",details:{data:d,headers:Object.fromEntries(c.headers.entries())}},{status:500,headers:{"Content-Type":"application/json","Cache-Control":"no-store"}});try{let e;let o=d.choices[0].message.content;try{e=JSON.parse(o)}catch(e){throw console.error("Error parseando respuesta:",o),Error("La respuesta no es un JSON v\xe1lido")}if(!e.title||!e.description||!Array.isArray(e.rules))throw Error("La respuesta no tiene la estructura correcta");a=e,console.log("Challenge parseado:",a)}catch(e){return console.error("Error procesando el contenido del mensaje:",e),i.NextResponse.json({error:"Error procesando el contenido del mensaje",details:{error:e instanceof Error?e.message:"Error desconocido",content:d.choices[0].message.content}},{status:500,headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}let u=await (0,y.x7)(n),p={id:m(),...a,skill:o,level:r,type:n,createdAt:new Date().toISOString()};if(await (0,y.Fz)(p,u))return console.log("Reto similar encontrado, generando uno nuevo..."),i.NextResponse.json({error:"Reto similar encontrado, intentando de nuevo..."},{status:409});return await (0,y.EJ)(p,n),i.NextResponse.json(p,{headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}catch(e){return console.error("Error completo:",e),i.NextResponse.json({error:"Error inesperado",details:e instanceof Error?e.message:"Error desconocido"},{status:500,headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}}let f=new n.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/generate-challenge/route",pathname:"/api/generate-challenge",filename:"route",bundlePath:"app/api/generate-challenge/route"},resolvedPagePath:"C:\\Users\\ethan\\Downloads\\login-page (1) (3)\\login-page (1)\\app\\api\\generate-challenge\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:b,staticGenerationAsyncStorage:x,serverHooks:E}=f,j="/api/generate-challenge/route";function q(){return(0,s.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:x})}},9836:(e,a,o)=>{o.d(a,{Hw:()=>r,dt:()=>t,gd:()=>n});let r=process.env.DEEPSEEK_API_KEY||"",n="https://api.deepseek.com/v1/chat/completions";function t(){let e={apiKey:{present:!!r,length:r?.length||0,envVar:"DEEPSEEK_API_KEY"},apiUrl:n,environment:"production"};return console.log("Configuraci\xf3n de la API:",{...e,apiKey:{...e.apiKey,value:r?`${r.substring(0,4)}...${r.substring(r.length-4)}`:"no configurada"}}),r||console.error("⚠️ DEEPSEEK_API_KEY no est\xe1 configurado en las variables de entorno"),e}t()},9310:(e,a,o)=>{async function r(e){try{let a=await fetch(`/api/challenges/${e}`);if(!a.ok)throw Error("Error al cargar los retos");let o=await a.json();return Array.isArray(o)?o:[]}catch(a){return console.error(`Error loading ${e} challenges:`,a),[]}}async function n(e,a){try{if(!(await fetch(`/api/challenges/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Error al guardar el reto")}catch(e){throw console.error(`Error saving ${a} challenge:`,e),Error("Error al guardar el reto")}}async function t(e,a){return!1}o.d(a,{EJ:()=>n,Fz:()=>t,x7:()=>r})}};var a=require("../../../webpack-runtime.js");a.C(e);var o=e=>a(a.s=e),r=a.X(0,[140,833],()=>o(2100));module.exports=r})();