"use strict";(()=>{var e={};e.id=588,e.ids=[588],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},177:(e,o,r)=>{r.r(o),r.d(o,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>u});var t={};r.r(t),r.d(t,{GET:()=>l});var n=r(3278),s=r(5002),a=r(4877),i=r(1309),c=r(9836);async function l(){try{let e=r(2048).promises,o=r(5315),t=o.join(process.cwd(),"data");console.log("Intentando crear directorio:",t);try{await e.mkdir(t,{recursive:!0}),console.log("Directorio creado o ya existente")}catch(e){console.error("Error creando directorio:",e)}let n=o.join(t,"test.json");console.log("Intentando escribir archivo:",n);try{await e.writeFile(n,JSON.stringify({test:"ok"})),console.log("Archivo escrito correctamente")}catch(e){console.error("Error escribiendo archivo:",e)}console.log("Intentando leer archivo:",n);try{let o=await e.readFile(n,"utf-8");console.log("Archivo le\xeddo correctamente:",o)}catch(e){console.error("Error leyendo archivo:",e)}console.log("Probando API...");let s=await fetch(`${c.gd}/v1/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.Hw}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:'Genera un reto simple en formato JSON con esta estructura exacta: {"title": "Test", "description": "Test description", "rules": ["rule1"], "extraTip": "tip"}'}],temperature:.1,max_tokens:200,stream:!1})}),a=await s.json();console.log("Respuesta de la API:",JSON.stringify(a,null,2));let l=a.choices[0].message.content;console.log("Contenido recibido:",l);let p=l.trim().replace(/^```json\n?|\n?```$/g,"");console.log("Contenido limpio:",p);let d=JSON.parse(p);return console.log("Challenge parseado:",d),i.NextResponse.json({success:!0,filesystem:{dataDir:t,testFile:n,canWrite:!0,canRead:!0},api:{response:a,parsedChallenge:d}})}catch(e){return console.error("Error completo:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Error desconocido",stack:e instanceof Error?e.stack:void 0})}}let p=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/test-challenge/route",pathname:"/api/test-challenge",filename:"route",bundlePath:"app/api/test-challenge/route"},resolvedPagePath:"C:\\Users\\ethan\\Downloads\\login-page (1) (3)\\login-page (1)\\app\\api\\test-challenge\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:u,serverHooks:g}=p,h="/api/test-challenge/route";function m(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:u})}},9836:(e,o,r)=>{r.d(o,{Hw:()=>t,dt:()=>s,gd:()=>n});let t=process.env.DEEPSEEK_API_KEY||"",n="https://api.deepseek.com/v1/chat/completions";function s(){let e={apiKey:{present:!!t,length:t?.length||0,envVar:"DEEPSEEK_API_KEY"},apiUrl:n,environment:"production"};return console.log("Configuraci\xf3n de la API:",{...e,apiKey:{...e.apiKey,value:t?`${t.substring(0,4)}...${t.substring(t.length-4)}`:"no configurada"}}),t||console.error("⚠️ DEEPSEEK_API_KEY no est\xe1 configurado en las variables de entorno"),e}s()}};var o=require("../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),t=o.X(0,[140,833],()=>r(177));module.exports=t})();